

create table Transaction
		(
			TransactionID int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
			FromAccountNo varchar(16),
                        ToAccountNo varchar(16),
                        Amount DOUBLE DEFAULT 0.0,
                        Date DATETIME,
			Remark varchar(255),
			UserId int,
			CONSTRAINT fk_user_transaction FOREIGN KEY (UserId) REFERENCES UserDetails(UserId)
                                                                               
		)

create table Address
               (		
									      AddressId int primary key,
                 						              Address varchar(255),
                                                                              State varchar(50),
                                                                              City varchar(50),
                                                                              Pincode int,
									      foreign key (UserId) references UserDetail(UserId)
		)

CREATE TABLE Address (
    AddressId INT PRIMARY KEY,
    Address VARCHAR(255),
    State VARCHAR(50),
    City VARCHAR(50),
    Pincode INT,
    UserId INT, -- Foreign key referencing the UserId column in the UserDetail table
    CONSTRAINT fk_user FOREIGN KEY (UserId) REFERENCES UserDetails(UserId)
);

create table UserDetails
		(
        								      UserId int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
									      Title varchar(10),		 
									      FirstName varchar(255),
									      MiddleName varchar(255),
                                                                              LastName varchar(255),
									      FatherName varchar(255),
                                                                              MobileNumber varchar(15),
                                                                              EmailId varchar(255),
                                                                              AdharCard varchar(12),
                                                                              BirthDate date,
									      AccountBalance decimal(10,2),
										AccountStatus varchar(20),
                                                                              ReferenceNo varchar(255),
 									      AccountNumber varchar(16),
									      UserLoginId varchar(255),
                                                                              LoginPassword varchar(255),
                                                                              TransactionPassword varchar(255)
									      
		)

=================================================================
If UserId is a simple auto-incrementing integer generated by the database for each new user, it's generally a good choice for a primary key 
as it provides efficient indexing and ensures uniqueness.

=================================================================
Create Table Payee
(
	        PayeeId INT PRIMARY KEY,
		PayeeName varchar(255),
		PayeeAccNo varchar(255),
		NickName varchar(50),
		UserId INT,
    		CONSTRAINT fk_user_payee FOREIGN KEY (UserId) REFERENCES UserDetails(UserId)
)
=====================================================================
-- Create a new table with the desired schema
CREATE TABLE Payee_New (
    PayeeId INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    PayeeName VARCHAR(255),
    PayeeAccNo VARCHAR(255),
    NickName VARCHAR(50),
    UserId INT,
    CONSTRAINT fk_user_payee FOREIGN KEY (UserId) REFERENCES UserDetails(UserId)
);

-- Copy data from the old table to the new table
INSERT INTO Payee_New (PayeeName, PayeeAccNo, NickName, UserId)
SELECT PayeeName, PayeeAccNo, NickName, UserId FROM Payee;

-- Drop the old table
DROP TABLE Payee;

-- Rename the new table to the original table name
ALTER TABLE Payee_New RENAME TO Payee;



======================================================================================================================

ALTER TABLE UserDetails ADD CONSTRAINT UK_UserDetails_UserId UNIQUE (UserId);
ALTER TABLE UserDetails ALTER COLUMN uid RENAME TO UserId;
ALTER TABLE UserDetails DROP COLUMN UserId;
ALTER TABLE UserDetails DROP CONSTRAINT FK_USER_Payee;
FK_USER_Payee;FK_USER_Transaction;FK_USER_Address;
UPDATE UserDetails SET uid = UserId;
ALTER TABLE UserDetails ADD COLUMN uId INT GENERATED BY DEFAULT AS IDENTITY (START WITH 1);
ALTER TABLE Payee ADD CONSTRAINT FK_USER_Payee FOREIGN KEY (UserId) REFERENCES UserDetails(UserId);

=============================================================
--if not work in hsqldb
ALTER TABLE UserDetails DROP CONSTRAINT IF EXISTS PK_UserDetails;

ALTER TABLE UserDetails ALTER COLUMN UserId INTEGER GENERATED BY DEFAULT AS IDENTITY (START WITH 1);

ALTER TABLE UserDetails ADD CONSTRAINT PK_UserDetails PRIMARY KEY (UserId);





